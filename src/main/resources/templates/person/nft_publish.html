<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="../../static/css/style.css" rel="stylesheet" th:href="@{/resources/css/style.css}">
    <link rel="shortcut icon" th:href="@{/resources/favicon.ico}" type="image/png"/>
</head>


<body>
<style type="text/css">.thumb-image{float:left;width:100px;position:relative;padding:5px;}.selectedItem{border:2px solid blue;}</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<div class="wrapper">
    <header th:replace="fragments/defaultHeader :: ${user!=null ? 'header_authorized' : 'header_unauthorized'} "></header>

    <div class="content">
        <form action="#" enctype="multipart/form-data" method="POST" th:action="@{'/upload_nft'}">
            <input id="fileUpload" name="file" type="file"><br/><br/>
            <label>
                <input name="name" type="text">
            </label> Название<br/> <br/>
            <label>
                <input name="description" type="text">
            </label> Описание<br/> <br/>
            <input type="submit" value="Upload"> Press here to upload the file!
        </form>
        <div id="image-holder">
        </div>
    </div>


    <footer th:replace="fragments/defaultFooter"></footer>
</div>

<script>
    $(document).ready(function() {

        $("#image-holder").on('click','.thumb-image',function(){
            $(this).toggleClass("selectedItem");
        });

        $("#fileUpload").on('change', function() {
            //Get count of selected files
            var countFiles = $(this)[0].files.length;
            var imgPath = $(this)[0].value;
            var extn = imgPath.substring(imgPath.lastIndexOf('.') + 1).toLowerCase();
            var image_holder = $("#image-holder");
            image_holder.empty();
            if (extn === "gif" || extn === "png" || extn === "jpg" || extn === "jpeg") {
                if (typeof(FileReader) != "undefined") {
                    //loop for each file selected for uploaded.
                    for (var i = 0; i < countFiles; i++)
                    {
                        var reader = new FileReader();
                        reader.onload = function(e) {
                            $('<img>', {
                                "src": e.target.result,
                                "class": "thumb-image",
                                "alt": "predload picture"
                            }).appendTo(image_holder);
                        }
                        image_holder.show();
                        reader.readAsDataURL($(this)[0].files[i]);
                    }
                } else {
                    alert("This browser does not support FileReader.");
                }
            } else {
                alert("Pls select only images");
            }
        });
    });
</script>
</body>
</html>